<!doctype html>
<title>Identity</title>
<script type="module">
 setupNextLink()
 main()
 async function main() {
   await import("/deps/localForage-1.10.0.js")
   const store = localforage.createInstance({
     name: "active-reading",
     storeName: "client"
   })
   try {
     let previousWelcome = await store.getItem("greeting")
     if (!previousWelcome) {
       await store.setItem("greeting", "hello, world!")
       window.log.textContent += `welcome, first timer\n`
     } else {
       window.log.textContent += `welcome back!\n`
     }
     window.log.textContent += `previous welcome: ${JSON.stringify(previousWelcome,null,2)}\n`
     let nextWelcome = await store.getItem("greeting")
     window.log.textContent += `next welcome: ${JSON.stringify(nextWelcome, null,2)}`
   } catch (error) {
     window.log.textContent += `WAT? ${error}`
   }
 }
 function setupNextLink() {
   // next step is in a different localhost subdomain but served on
   // the same port
   const link = window.next
   const url = new URL(window.location)
   url.hostname = "tree.localhost"
   url.pathname = "/tree"
   link.href= url.toString()
   link.textContent = url.toString()
 }
</script>
<link rel="icon" type="image/png" href="data:image/png;base64,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">
<pre id="log">
</pre>
<hr>
<p>
  The very first time you visit this page, you will be greeted as a
  first timer.  Every subsequent visit you will be welcomed back.
</p>
<p>
  You can use the browser's developer tools to reset the
  experiment by deleting the indexed DB named "active-reading".
</p>
<p>
  The next step in the experiment is to visit <a href="" id="next" target="_blank"></a>
</p>
