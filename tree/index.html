<!doctype html>
<title>Tree</title>
<script type="module">
 await import("./deps/localForage-1.10.0.js")
 const store = localforage.createInstance({
   name: "fifth-random",
   storeName: "proof"
 })
 try {
   let previousWelcome = await store.getItem("greeting")
   if (!previousWelcome) {
     await store.setItem("greeting", "hello, Tree!")
     window.log.textContent += `welcome, first timer\n`
   } else {
     window.log.textContent += `welcome back!\n`
   }
   window.log.textContent += `[${JSON.stringify(previousWelcome,null,2)}]\n`
 } catch (error) {
   window.log.textContent += `WAT? ${error}`
 }
</script>
<p>
  You are at the second step of our experiment. In the previous step,
  a greeting was saved in your web browser's local indexed DB. The
  purpose of this step in the experiment is to prove that the browser
  separates databases by domain name.
</p>
<p>
  The very first time you visit this page, you will be greeted as a
  first timer, even though the previous step saved a greeting. On
  every subsequent visit, you will be welcomed back.
</p>
<p>
  Even though we are using the same names for storage in our code,
  this page cannot see values that were saved under the other domain.
  As a minor further confirmation, we save a different greeting here
  on your first visit.
</p>
<pre id="log">
</pre>
<p>
  You can use the browser's developer tools to reset this step in the
  experiment by deleting the indexed DB named "fifth-random".
</p>
